// -------------------------------------------------------
// -------------------------------------------------------
// Synthetic Aperture - Particle Tracking Velocimetry Code
// --- Tracking Library Header ---
// -------------------------------------------------------
// Author: Abhishek Bajpayee
//         Dept. of Mechanical Engineering
//         Massachusetts Institute of Technology
// -------------------------------------------------------
// -------------------------------------------------------

#ifndef TRACKING_LIBRARY
#define TRACKING_LIBRARY

#include "std_include.h"
#include "refocusing.h"
#include "typedefs.h"

using namespace std;
using namespace cv;

class pTracking {

 public:
    ~pTracking() {

    }

 pTracking(saRefocus refocus): refocus_(refocus) {}

    void read_points(string path);

    void track();

    

 private:

    vector<Point2i> relaxation_set(int frame1, int frame2, double E, double F);
    vector< vector<int> > neighbor_set(int frame1, int frame2, double r);
    vector<int> points_in_region(int frame, Point3f center, double r);

    vector<Point3f> points_;
    vector< vector<Point3f> > all_points_;
    vector<volume> vols_;

    saRefocus refocus_;

};

#endif
