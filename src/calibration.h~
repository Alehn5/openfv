// -------------------------------------------------------
// -------------------------------------------------------
// Synthetic Aperture - Particle Tracking Velocimetry Code
// --- Calibration Library ---
// -------------------------------------------------------
// Author: Abhishek Bajpayee
//         Dept. of Mechanical Engineering
//         Massachusetts Institute of Technology
// -------------------------------------------------------
// -------------------------------------------------------

#include "std_include.h"
#include "optimization.h"

class multiCamCalibration {
 public:
    ~multiCamCalibration() {
        //
    }
    
    // Functions to access calibration data
    int num_cams() { return num_cams; }
    int num_imgs() { return num_imgs; }
    Size grid_size() { return grid_size; }
    vector<string> cam_names() { return cam_names(); }
    
    // Functions to run calibration
    void read_cam_names();
    void read_calib_imgs();

 private:

    string path;
    
    int num_cams;
    int num_imgs;
    int center_cam_id;
    
    Size grid_size;
    
    double grid_size_phys;
    double grid_size_pix;
    double pix_per_phys;
    
    vector<string> cam_cames;
    vector< vector<Mat> > calib_imgs;
    vector< vector<Point3f> > all_pattern_points;
    vector<Mat> cameraMats;
    vector<Mat> dist_coeffs;
    vector< vector<Mat> > rvecs;
    vector< vector<Mat> > tvecs;

    // Option flags
    int solveForDistortion = 0; // NOT IMPLEMENTED
    int squareGrid = 0; // NOT IMPLEMENTED
    int saveCornerImgs = 0; // NOT IMPLEMENTED
    
}
    
    
